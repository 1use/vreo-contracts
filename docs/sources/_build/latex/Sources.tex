%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,10pt,english,openany]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
 \ifdefined\DeclareUnicodeCharacterAsOptional
  \DeclareUnicodeCharacter{"00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{"2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{"2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{"2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{"251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{"2572}{\textbackslash}
 \else
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{2572}{\textbackslash}
 \fi
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage[dontkeepoldnames]{sphinx}
\sphinxsetup{verbatimwithframe=true,VerbatimBorderColor={rgb}{0.9,0.9,0.9}}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Table}}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{1}


\usepackage{helvet}
\usepackage{inconsolata}
\renewcommand{\familydefault}{\sfdefault}
\let\stdsection\section
\renewcommand\section{\clearpage\stdsection}


\title{Vreo ICO Solidity Smart Contracts}
\date{Jun 08, 2018}
\release{1}
\author{Sicos et al.}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex

\begin{document}

\maketitle
\sphinxtableofcontents
\phantomsection\label{\detokenize{index::doc}}



\chapter{VreoToken}
\label{\detokenize{_contracts/VreoToken:tokenplatform-s-solidity-sources}}\label{\detokenize{_contracts/VreoToken::doc}}\label{\detokenize{_contracts/VreoToken:vreotoken}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{k+kr}{pragma} \PYG{n+nx}{solidity} \PYG{l+m+mf}{0.4}\PYG{l+m+mf}{.24}\PYG{p}{;}

\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/token/ERC20/CappedToken.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/token/ERC20/PausableToken.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/token/ERC20/BurnableToken.sol\PYGZdq{}}\PYG{p}{;}


\PYG{c+c1}{/// @title VreoToken}
\PYG{c+c1}{/// @author Autogenerated from a Dia UML diagram}
\PYG{k+kd}{contract} \PYG{n+nx}{VreoToken} \PYG{k+kr}{is} \PYG{n+nx}{CappedToken}\PYG{p}{,} \PYG{n+nx}{PausableToken}\PYG{p}{,} \PYG{n+nx}{BurnableToken} \PYG{p}{\PYGZob{}}

    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{TOTAL\PYGZus{}TOKEN\PYGZus{}CAP} \PYG{o}{=} \PYG{l+m+mf}{700000000e18}\PYG{p}{;}  \PYG{c+c1}{// = 700.000.000 e18}

    \PYG{k+kt}{string} \PYG{k+kr}{public} \PYG{n+nx}{name} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}MERO Token\PYGZdq{}}\PYG{p}{;}
    \PYG{k+kt}{string} \PYG{k+kr}{public} \PYG{n+nx}{symbol} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}MERO\PYGZdq{}}\PYG{p}{;}
    \PYG{k+kt}{uint8} \PYG{k+kr}{public} \PYG{n+nx}{decimals} \PYG{o}{=} \PYG{l+m+mi}{18}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Constructor}
    \PYG{k+kd}{constructor}\PYG{p}{(}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{CappedToken}\PYG{p}{(}\PYG{n+nx}{TOTAL\PYGZus{}TOKEN\PYGZus{}CAP}\PYG{p}{)} \PYG{p}{\PYGZob{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Burn}
    \PYG{c+c1}{/// @param \PYGZus{}value A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{burn}\PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}value}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{whenNotPaused} \PYG{p}{\PYGZob{}}
        \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{burn}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}value}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\chapter{TokenCappedCrowdsale}
\label{\detokenize{_contracts/TokenCappedCrowdsale::doc}}\label{\detokenize{_contracts/TokenCappedCrowdsale:tokencappedcrowdsale}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{k+kr}{pragma} \PYG{n+nx}{solidity} \PYG{l+m+mf}{0.4}\PYG{l+m+mf}{.24}\PYG{p}{;}

\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/crowdsale/Crowdsale.sol\PYGZdq{}}\PYG{p}{;}


\PYG{c+c1}{/// @title TokenCappedCrowdsale}
\PYG{c+c1}{/// @author Autogenerated from a Dia UML diagram}
\PYG{k+kd}{contract} \PYG{n+nx}{TokenCappedCrowdsale} \PYG{k+kr}{is} \PYG{n+nx}{Crowdsale} \PYG{p}{\PYGZob{}}

    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{n+nx}{remainingTokens}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Constructor}
    \PYG{c+c1}{/// @param \PYGZus{}cap A positive number}
    \PYG{k+kd}{constructor}\PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}cap}\PYG{p}{)} \PYG{k+kr}{public} \PYG{p}{\PYGZob{}}
        \PYG{n+nx}{remainingTokens} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}cap}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Deliver tokens}
    \PYG{c+c1}{/// @param \PYGZus{}beneficiary An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}tokenAmount A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}deliverTokens}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}beneficiary}\PYG{p}{,} \PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{c+c1}{// SafeMath will reject on underflow.}
        \PYG{n+nx}{remainingTokens} \PYG{o}{=} \PYG{n+nx}{remainingTokens}\PYG{p}{.}\PYG{n+nx}{sub}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{)}\PYG{p}{;}

        \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{\PYGZus{}deliverTokens}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}beneficiary}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\chapter{PostKYCCrowdsale}
\label{\detokenize{_contracts/PostKYCCrowdsale:postkyccrowdsale}}\label{\detokenize{_contracts/PostKYCCrowdsale::doc}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{k+kr}{pragma} \PYG{n+nx}{solidity} \PYG{l+m+mf}{0.4}\PYG{l+m+mf}{.24}\PYG{p}{;}

\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/ownership/Ownable.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/crowdsale/Crowdsale.sol\PYGZdq{}}\PYG{p}{;}


\PYG{c+c1}{/// @title PostKYCCrowdsale}
\PYG{c+c1}{/// @author Autogenerated from a Dia UML diagram}
\PYG{k+kd}{contract} \PYG{n+nx}{PostKYCCrowdsale} \PYG{k+kr}{is} \PYG{n+nx}{Crowdsale}\PYG{p}{,} \PYG{n+nx}{Ownable} \PYG{p}{\PYGZob{}}

    \PYG{k+kd}{struct} \PYG{n+nx}{Investment} \PYG{p}{\PYGZob{}}
        \PYG{k+kt}{bool} \PYG{n+nx}{isVerified}\PYG{p}{;}  \PYG{c+c1}{// wether or not the investor passed the KYC process}
        \PYG{k+kt}{uint} \PYG{n+nx}{weiAmount}\PYG{p}{;}   \PYG{c+c1}{// invested wei}
        \PYG{k+kt}{uint} \PYG{n+nx}{tokenAmount}\PYG{p}{;} \PYG{c+c1}{// amount of token quantums the investor wants to purchase}
    \PYG{p}{\PYGZcb{}}

    \PYG{k+kd}{mapping}\PYG{p}{(}\PYG{k+kt}{address} \PYG{o}{=\PYGZgt{}} \PYG{n+nx}{Investment}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{investments}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Log entry on investor verified}
    \PYG{c+c1}{/// @param investor An Ethereum address}
    \PYG{k+kd}{event} \PYG{n+nx}{InvestorVerified}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{investor}\PYG{p}{)}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Log entry on tokens delivered}
    \PYG{c+c1}{/// @param investor An Ethereum address}
    \PYG{c+c1}{/// @param amount A positive number}
    \PYG{k+kd}{event} \PYG{n+nx}{TokensDelivered}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{investor}\PYG{p}{,} \PYG{k+kt}{uint} \PYG{n+nx}{amount}\PYG{p}{)}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Log entry on withdrawn}
    \PYG{c+c1}{/// @param investor An Ethereum address}
    \PYG{c+c1}{/// @param value A positive number}
    \PYG{k+kd}{event} \PYG{n+nx}{Withdrawn}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{investor}\PYG{p}{,} \PYG{k+kt}{uint} \PYG{n+nx}{value}\PYG{p}{)}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Verify investors}
    \PYG{c+c1}{/// @param \PYGZus{}investors An Ethereum address}
    \PYG{k+kd}{function} \PYG{n+nx}{verifyInvestors}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{[}\PYG{p}{]} \PYG{n+nx}{\PYGZus{}investors}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{onlyOwner} \PYG{p}{\PYGZob{}}
        \PYG{k}{for} \PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{i} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;} \PYG{n+nx}{i} \PYG{o}{\PYGZlt{}} \PYG{n+nx}{\PYGZus{}investors}\PYG{p}{.}\PYG{n+nx}{length}\PYG{p}{;} \PYG{o}{++}\PYG{n+nx}{i}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{k+kt}{address} \PYG{n+nx}{investor} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}investors}\PYG{p}{[}\PYG{n+nx}{i}\PYG{p}{]}\PYG{p}{;}
            \PYG{n+nx}{Investment} \PYG{k+kd}{storage} \PYG{n+nx}{investment} \PYG{o}{=} \PYG{n+nx}{investments}\PYG{p}{[}\PYG{n+nx}{investor}\PYG{p}{]}\PYG{p}{;}

            \PYG{k}{if} \PYG{p}{(}\PYG{o}{!}\PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{isVerified}\PYG{p}{)} \PYG{p}{\PYGZob{}}
                \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{isVerified} \PYG{o}{=} \PYG{k+kc}{true}\PYG{p}{;}

                \PYG{k+kr}{emit} \PYG{n+nx}{InvestorVerified}\PYG{p}{(}\PYG{n+nx}{investor}\PYG{p}{)}\PYG{p}{;}

                \PYG{k+kt}{uint} \PYG{n+nx}{weiAmount} \PYG{o}{=} \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{weiAmount}\PYG{p}{;}
                \PYG{k+kt}{uint} \PYG{n+nx}{tokenAmount} \PYG{o}{=} \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{tokenAmount}\PYG{p}{;}

                \PYG{k}{if} \PYG{p}{(}\PYG{n+nx}{weiAmount} \PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0}\PYG{p}{)} \PYG{p}{\PYGZob{}}
                    \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{weiAmount} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;}
                    \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{tokenAmount} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;}

                    \PYG{n+nx}{\PYGZus{}forwardFunds}\PYG{p}{(}\PYG{n+nx}{weiAmount}\PYG{p}{)}\PYG{p}{;}
                    \PYG{n+nx}{\PYGZus{}deliverTokens}\PYG{p}{(}\PYG{n+nx}{investor}\PYG{p}{,} \PYG{n+nx}{tokenAmount}\PYG{p}{)}\PYG{p}{;}

                    \PYG{k+kr}{emit} \PYG{n+nx}{TokensDelivered}\PYG{p}{(}\PYG{n+nx}{investor}\PYG{p}{,} \PYG{n+nx}{tokenAmount}\PYG{p}{)}\PYG{p}{;}
                \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
        \PYG{p}{\PYGZcb{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Withdraw}
    \PYG{k+kd}{function} \PYG{n+nx}{withdraw}\PYG{p}{(}\PYG{p}{)} \PYG{k+kr}{public} \PYG{p}{\PYGZob{}}
        \PYG{n+nx}{Investment} \PYG{k+kd}{storage} \PYG{n+nx}{investment} \PYG{o}{=} \PYG{n+nx}{investments}\PYG{p}{[}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{]}\PYG{p}{;}
        \PYG{k+kt}{uint} \PYG{n+nx}{weiAmount} \PYG{o}{=} \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{weiAmount}\PYG{p}{;}

        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{weiAmount} \PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{weiAmount} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;}
        \PYG{n+nx}{investment}\PYG{p}{.}\PYG{n+nx}{tokenAmount} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;}

        \PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{.}\PYG{n+nx}{transfer}\PYG{p}{(}\PYG{n+nx}{weiAmount}\PYG{p}{)}\PYG{p}{;}

        \PYG{k+kr}{emit} \PYG{n+nx}{Withdrawn}\PYG{p}{(}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{,} \PYG{n+nx}{weiAmount}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Pre validate purchase}
    \PYG{c+c1}{/// @param \PYGZus{}beneficiary An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}weiAmount A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}preValidatePurchase}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}beneficiary}\PYG{p}{,} \PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}beneficiary} \PYG{o}{==} \PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{)}\PYG{p}{;}

        \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{\PYGZus{}preValidatePurchase}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}beneficiary}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Process purchase}
    \PYG{c+c1}{// @param \PYGZus{}beneficiary An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}tokenAmount A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}processPurchase}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{,} \PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{k}{if} \PYG{p}{(}\PYG{n+nx}{investments}\PYG{p}{[}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{]}\PYG{p}{.}\PYG{n+nx}{isVerified}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{n+nx}{\PYGZus{}deliverTokens}\PYG{p}{(}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{)}\PYG{p}{;}

            \PYG{k+kr}{emit} \PYG{n+nx}{TokensDelivered}\PYG{p}{(}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}} \PYG{k}{else} \PYG{p}{\PYGZob{}}
            \PYG{n+nx}{investments}\PYG{p}{[}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{]}\PYG{p}{.}\PYG{n+nx}{weiAmount} \PYG{o}{=} \PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{value}\PYG{p}{;}
            \PYG{n+nx}{investments}\PYG{p}{[}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{]}\PYG{p}{.}\PYG{n+nx}{tokenAmount} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}tokenAmount}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Forward funds}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}forwardFunds}\PYG{p}{(}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{k}{if} \PYG{p}{(}\PYG{n+nx}{investments}\PYG{p}{[}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{]}\PYG{p}{.}\PYG{n+nx}{isVerified}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{\PYGZus{}forwardFunds}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Forward funds}
    \PYG{c+c1}{/// @param \PYGZus{}weiAmount A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}forwardFunds}\PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{n+nx}{wallet}\PYG{p}{.}\PYG{n+nx}{transfer}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\chapter{VreoTokenSale}
\label{\detokenize{_contracts/VreoTokenSale:vreotokensale}}\label{\detokenize{_contracts/VreoTokenSale::doc}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{k+kr}{pragma} \PYG{n+nx}{solidity} \PYG{l+m+mf}{0.4}\PYG{l+m+mf}{.24}\PYG{p}{;}

\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/crowdsale/distribution/FinalizableCrowdsale.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/crowdsale/emission/MintedCrowdsale.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}./TokenCappedCrowdsale.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}./PostKYCCrowdsale.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}./IconiqInterface.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}./VreoToken.sol\PYGZdq{}}\PYG{p}{;}


\PYG{c+c1}{/// @title VreoTokenSale}
\PYG{c+c1}{/// @author Autogenerated from a Dia UML diagram}
\PYG{k+kd}{contract} \PYG{n+nx}{VreoTokenSale} \PYG{k+kr}{is} \PYG{n+nx}{PostKYCCrowdsale}\PYG{p}{,} \PYG{n+nx}{TokenCappedCrowdsale}\PYG{p}{,} \PYG{n+nx}{FinalizableCrowdsale}\PYG{p}{,} \PYG{n+nx}{MintedCrowdsale} \PYG{p}{\PYGZob{}}

    \PYG{c+c1}{// Maxmimum number of tokens sold in Presale+Iconiq+Vreo sales}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{TOTAL\PYGZus{}TOKEN\PYGZus{}CAP\PYGZus{}OF\PYGZus{}SALE} \PYG{o}{=} \PYG{l+m+mf}{450000000e18}\PYG{p}{;}  \PYG{c+c1}{// = 450.000.000 e18}

    \PYG{c+c1}{// Extra tokens minted upon finalization}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}TEAM}     \PYG{o}{=}  \PYG{l+m+mf}{85000000e18}\PYG{p}{;}  \PYG{c+c1}{// =  85.000.000 e18}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}ADVISORS} \PYG{o}{=}  \PYG{l+m+mf}{58000000e18}\PYG{p}{;}  \PYG{c+c1}{// =  58.000.000 e18}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}LEGALS}   \PYG{o}{=}  \PYG{l+m+mf}{57000000e18}\PYG{p}{;}  \PYG{c+c1}{// =  57.000.000 e18}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}BOUNTY}   \PYG{o}{=}  \PYG{l+m+mf}{50000000e18}\PYG{p}{;}  \PYG{c+c1}{// =  50.000.000 e18}

    \PYG{c+c1}{// Extra token percentages}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{BONUS\PYGZus{}PCT\PYGZus{}IN\PYGZus{}ICONIQ\PYGZus{}SALE}       \PYG{o}{=} \PYG{l+m+mi}{20}\PYG{p}{;}  \PYG{c+c1}{// TBD}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{BONUS\PYGZus{}PCT\PYGZus{}IN\PYGZus{}VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}1} \PYG{o}{=} \PYG{l+m+mi}{20}\PYG{p}{;}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{BONUS\PYGZus{}PCT\PYGZus{}IN\PYGZus{}VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}2} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{;}

    \PYG{c+c1}{// Date/time constants}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{ICONIQ\PYGZus{}SALE\PYGZus{}OPENING\PYGZus{}TIME}   \PYG{o}{=} \PYG{l+m+mi}{1530432000}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}07\PYGZhy{}01 10:00:00 CEST}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{ICONIQ\PYGZus{}SALE\PYGZus{}CLOSING\PYGZus{}TIME}   \PYG{o}{=} \PYG{l+m+mi}{1531598400}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}07\PYGZhy{}14 22:00:00 CEST}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}OPENING\PYGZus{}TIME}     \PYG{o}{=} \PYG{l+m+mi}{1532160000}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}07\PYGZhy{}21 10:00:00 CEST}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}1\PYGZus{}END\PYGZus{}TIME} \PYG{o}{=} \PYG{l+m+mi}{1532462400}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}07\PYGZhy{}24 22:00:00 CEST}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}2\PYGZus{}END\PYGZus{}TIME} \PYG{o}{=} \PYG{l+m+mi}{1533153600}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}08\PYGZhy{}01 22:00:00 CEST}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}CLOSING\PYGZus{}TIME}     \PYG{o}{=} \PYG{l+m+mi}{1534622400}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}08\PYGZhy{}18 22:00:00 CEST}
    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{KYC\PYGZus{}VERIFICATION\PYGZus{}END\PYGZus{}TIME}  \PYG{o}{=} \PYG{l+m+mi}{1535832000}\PYG{p}{;}  \PYG{c+c1}{// 2018\PYGZhy{}09\PYGZhy{}01 22:00:00 CEST}

    \PYG{k+kt}{uint} \PYG{k+kr}{public} \PYG{k+kr}{constant} \PYG{n+nx}{MINIMUM\PYGZus{}LIFETIME\PYGZus{}AFTER\PYGZus{}END} \PYG{o}{=} \PYG{l+m+mi}{365} \PYG{k+kp}{days}\PYG{p}{;}

    \PYG{n+nx}{IconiqInterface} \PYG{k+kr}{public} \PYG{n+nx}{iconiq}\PYG{p}{;}
    \PYG{k+kt}{address} \PYG{k+kr}{public} \PYG{n+nx}{teamAddress}\PYG{p}{;}
    \PYG{k+kt}{address} \PYG{k+kr}{public} \PYG{n+nx}{advisorsAddress}\PYG{p}{;}
    \PYG{k+kt}{address} \PYG{k+kr}{public} \PYG{n+nx}{legalsAddress}\PYG{p}{;}
    \PYG{k+kt}{address} \PYG{k+kr}{public} \PYG{n+nx}{bountyAddress}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Log entry on rate changed}
    \PYG{c+c1}{/// @param newRate A positive number}
    \PYG{k+kd}{event} \PYG{n+nx}{RateChanged}\PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{newRate}\PYG{p}{)}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Constructor}
    \PYG{c+c1}{/// @param \PYGZus{}token A VreoToken}
    \PYG{c+c1}{/// @param \PYGZus{}rate A positive number}
    \PYG{c+c1}{/// @param \PYGZus{}iconiq An IconiqInterface}
    \PYG{c+c1}{/// @param \PYGZus{}teamAddress An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}advisorsAddress An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}legalsAddress An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}bountyAddress A VreoTokenBounty}
    \PYG{c+c1}{/// @param \PYGZus{}wallet An Ethereum address}
    \PYG{k+kd}{constructor}\PYG{p}{(}
        \PYG{n+nx}{VreoToken} \PYG{n+nx}{\PYGZus{}token}\PYG{p}{,}
        \PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}rate}\PYG{p}{,}
        \PYG{n+nx}{IconiqInterface} \PYG{n+nx}{\PYGZus{}iconiq}\PYG{p}{,}
        \PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}teamAddress}\PYG{p}{,}
        \PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}advisorsAddress}\PYG{p}{,}
        \PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}legalsAddress}\PYG{p}{,}
        \PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}bountyAddress}\PYG{p}{,}
        \PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}wallet}
    \PYG{p}{)}
        \PYG{k+kr}{public}
        \PYG{n+nx}{Crowdsale}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}rate}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}wallet}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}token}\PYG{p}{)}
        \PYG{n+nx}{TokenCappedCrowdsale}\PYG{p}{(}\PYG{n+nx}{TOTAL\PYGZus{}TOKEN\PYGZus{}CAP\PYGZus{}OF\PYGZus{}SALE}\PYG{p}{)}
        \PYG{n+nx}{TimedCrowdsale}\PYG{p}{(}\PYG{n+nx}{ICONIQ\PYGZus{}SALE\PYGZus{}OPENING\PYGZus{}TIME}\PYG{p}{,} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}CLOSING\PYGZus{}TIME}\PYG{p}{)}
    \PYG{p}{\PYGZob{}}
        \PYG{c+c1}{// Token sanity check}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}token}\PYG{p}{.}\PYG{n+nx}{cap}\PYG{p}{(}\PYG{p}{)} \PYG{o}{\PYGZgt{}=} \PYG{n+nx}{TOTAL\PYGZus{}TOKEN\PYGZus{}CAP\PYGZus{}OF\PYGZus{}SALE}
                                \PYG{o}{+} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}TEAM}
                                \PYG{o}{+} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}ADVISORS}
                                \PYG{o}{+} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}LEGALS}
                                \PYG{o}{+} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}BOUNTY}\PYG{p}{)}\PYG{p}{;}

        \PYG{c+c1}{// Sanity check of addresses}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}iconiq}\PYG{p}{)} \PYG{o}{!=} \PYG{k+kt}{address}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}
                \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nx}{\PYGZus{}teamAddress} \PYG{o}{!=} \PYG{k+kt}{address}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}
                \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nx}{\PYGZus{}advisorsAddress} \PYG{o}{!=} \PYG{k+kt}{address}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}
                \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nx}{\PYGZus{}legalsAddress} \PYG{o}{!=} \PYG{k+kt}{address}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}
                \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nx}{\PYGZus{}bountyAddress} \PYG{o}{!=} \PYG{k+kt}{address}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{iconiq} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}iconiq}\PYG{p}{;}
        \PYG{n+nx}{teamAddress} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}teamAddress}\PYG{p}{;}
        \PYG{n+nx}{advisorsAddress} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}advisorsAddress}\PYG{p}{;}
        \PYG{n+nx}{legalsAddress} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}legalsAddress}\PYG{p}{;}
        \PYG{n+nx}{bountyAddress} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}bountyAddress}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Destroy}
    \PYG{k+kd}{function} \PYG{n+nx}{liquidate}\PYG{p}{(}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{onlyOwner} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{k+kp}{now} \PYG{o}{\PYGZgt{}=} \PYG{n+nx}{KYC\PYGZus{}VERIFICATION\PYGZus{}END\PYGZus{}TIME} \PYG{o}{+} \PYG{n+nx}{MINIMUM\PYGZus{}LIFETIME\PYGZus{}AFTER\PYGZus{}END}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{owner}\PYG{p}{.}\PYG{n+nx}{transfer}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{(}\PYG{k}{this}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{balance}\PYG{p}{)}\PYG{p}{;}
        \PYG{c+c1}{//selfdestruct(owner);}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Distribute presale}
    \PYG{c+c1}{/// @param \PYGZus{}investors A list where each entry is an Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}amounts A list where each entry is a positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{distributePresale}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{[}\PYG{p}{]} \PYG{n+nx}{\PYGZus{}investors}\PYG{p}{,} \PYG{k+kt}{uint}\PYG{p}{[}\PYG{p}{]} \PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{onlyOwner} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}investors}\PYG{p}{.}\PYG{n+nx}{length} \PYG{o}{==} \PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{.}\PYG{n+nx}{length}\PYG{p}{)}\PYG{p}{;}

        \PYG{k+kt}{uint} \PYG{n+nx}{totalAmount} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;}

        \PYG{k}{for} \PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{i} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;} \PYG{n+nx}{i} \PYG{o}{\PYGZlt{}} \PYG{n+nx}{\PYGZus{}investors}\PYG{p}{.}\PYG{n+nx}{length}\PYG{p}{;} \PYG{o}{++}\PYG{n+nx}{i}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{n+nx}{VreoToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{mint}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}investors}\PYG{p}{[}\PYG{n+nx}{i}\PYG{p}{]}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{[}\PYG{n+nx}{i}\PYG{p}{]}\PYG{p}{)}\PYG{p}{;}
            \PYG{n+nx}{totalAmount} \PYG{o}{=} \PYG{n+nx}{totalAmount}\PYG{p}{.}\PYG{n+nx}{add}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{[}\PYG{n+nx}{i}\PYG{p}{]}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}

        \PYG{n+nx}{remainingTokens} \PYG{o}{=} \PYG{n+nx}{remainingTokens}\PYG{p}{.}\PYG{n+nx}{sub}\PYG{p}{(}\PYG{n+nx}{totalAmount}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Set rate}
    \PYG{c+c1}{/// @param \PYGZus{}newRate A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{setRate}\PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}newRate}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{onlyOwner} \PYG{p}{\PYGZob{}}
        \PYG{c+c1}{// A rate change by a magnitude order of ten and above is rather a typo than intention.}
        \PYG{c+c1}{// If it was indeed desired, several setRate transactions have to be sent.}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{rate} \PYG{o}{/} \PYG{l+m+mi}{10} \PYG{o}{\PYGZlt{}} \PYG{n+nx}{\PYGZus{}newRate} \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nx}{\PYGZus{}newRate} \PYG{o}{\PYGZlt{}} \PYG{l+m+mi}{10} \PYG{o}{*} \PYG{n+nx}{rate}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{rate} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}newRate}\PYG{p}{;}

        \PYG{k+kr}{emit} \PYG{n+nx}{RateChanged}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}newRate}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Pre validate purchase}
    \PYG{c+c1}{/// @param \PYGZus{}beneficiary An Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}weiAmount A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}preValidatePurchase}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}beneficiary}\PYG{p}{,} \PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{ICONIQ\PYGZus{}SALE\PYGZus{}OPENING\PYGZus{}TIME} \PYG{o}{\PYGZlt{}=} \PYG{k+kp}{now} \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{k+kp}{now} \PYG{o}{\PYGZlt{}=} \PYG{n+nx}{ICONIQ\PYGZus{}SALE\PYGZus{}CLOSING\PYGZus{}TIME} \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nx}{iconiq}\PYG{p}{.}\PYG{n+nx}{isAllowed}\PYG{p}{(}\PYG{n+nx}{msg}\PYG{p}{.}\PYG{n+nx}{sender}\PYG{p}{)}
                \PYG{o}{\textbar{}\textbar{}} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}OPENING\PYGZus{}TIME} \PYG{o}{\PYGZlt{}=} \PYG{k+kp}{now} \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{k+kp}{now} \PYG{o}{\PYGZlt{}=} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}CLOSING\PYGZus{}TIME}\PYG{p}{)}\PYG{p}{;}

        \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{\PYGZus{}preValidatePurchase}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}beneficiary}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Get token amount}
    \PYG{c+c1}{/// @param \PYGZus{}weiAmount A positive number}
    \PYG{c+c1}{/// @return A positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{\PYGZus{}getTokenAmount}\PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{k+kr}{view} \PYG{k+kr}{returns} \PYG{p}{(}\PYG{k+kt}{uint}\PYG{p}{)} \PYG{p}{\PYGZob{}}
        \PYG{k+kt}{uint} \PYG{n+nx}{amount} \PYG{o}{=} \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{\PYGZus{}getTokenAmount}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}weiAmount}\PYG{p}{)}\PYG{p}{;}

        \PYG{k}{if} \PYG{p}{(}\PYG{k+kp}{now} \PYG{o}{\PYGZlt{}=} \PYG{n+nx}{ICONIQ\PYGZus{}SALE\PYGZus{}CLOSING\PYGZus{}TIME}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{k}{return} \PYG{n+nx}{amount}\PYG{p}{.}\PYG{n+nx}{mul}\PYG{p}{(}\PYG{l+m+mi}{100} \PYG{o}{+} \PYG{n+nx}{BONUS\PYGZus{}PCT\PYGZus{}IN\PYGZus{}ICONIQ\PYGZus{}SALE}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{div}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}

        \PYG{k}{if} \PYG{p}{(}\PYG{k+kp}{now} \PYG{o}{\PYGZlt{}=} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}1\PYGZus{}END\PYGZus{}TIME}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{k}{return} \PYG{n+nx}{amount}\PYG{p}{.}\PYG{n+nx}{mul}\PYG{p}{(}\PYG{l+m+mi}{100} \PYG{o}{+} \PYG{n+nx}{BONUS\PYGZus{}PCT\PYGZus{}IN\PYGZus{}VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}1}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{div}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}

        \PYG{k}{if} \PYG{p}{(}\PYG{k+kp}{now} \PYG{o}{\PYGZlt{}=} \PYG{n+nx}{VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}2\PYGZus{}END\PYGZus{}TIME}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{k}{return} \PYG{n+nx}{amount}\PYG{p}{.}\PYG{n+nx}{mul}\PYG{p}{(}\PYG{l+m+mi}{100} \PYG{o}{+} \PYG{n+nx}{BONUS\PYGZus{}PCT\PYGZus{}IN\PYGZus{}VREO\PYGZus{}SALE\PYGZus{}PHASE\PYGZus{}2}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{div}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}

        \PYG{k}{return} \PYG{n+nx}{amount}\PYG{p}{;}  \PYG{c+c1}{// No bonus}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Finalization}
    \PYG{k+kd}{function} \PYG{n+nx}{finalization}\PYG{p}{(}\PYG{p}{)} \PYG{k+kr}{internal} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{k+kp}{now} \PYG{o}{\PYGZgt{}=} \PYG{n+nx}{KYC\PYGZus{}VERIFICATION\PYGZus{}END\PYGZus{}TIME}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{MintableToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{mint}\PYG{p}{(}\PYG{n+nx}{teamAddress}\PYG{p}{,} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}TEAM}\PYG{p}{)}\PYG{p}{;}
        \PYG{n+nx}{MintableToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{mint}\PYG{p}{(}\PYG{n+nx}{advisorsAddress}\PYG{p}{,} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}ADVISORS}\PYG{p}{)}\PYG{p}{;}
        \PYG{n+nx}{MintableToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{mint}\PYG{p}{(}\PYG{n+nx}{legalsAddress}\PYG{p}{,} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}LEGALS}\PYG{p}{)}\PYG{p}{;}
        \PYG{n+nx}{MintableToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{mint}\PYG{p}{(}\PYG{n+nx}{bountyAddress}\PYG{p}{,} \PYG{n+nx}{TOKEN\PYGZus{}SHARE\PYGZus{}OF\PYGZus{}BOUNTY}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{VreoToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{finishMinting}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
        \PYG{n+nx}{VreoToken}\PYG{p}{(}\PYG{n+nx}{token}\PYG{p}{)}\PYG{p}{.}\PYG{n+nx}{unpause}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}

        \PYG{k+kr}{super}\PYG{p}{.}\PYG{n+nx}{finalization}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\chapter{VreoTokenBounty}
\label{\detokenize{_contracts/VreoTokenBounty:vreotokenbounty}}\label{\detokenize{_contracts/VreoTokenBounty::doc}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{k+kr}{pragma} \PYG{n+nx}{solidity} \PYG{l+m+mf}{0.4}\PYG{l+m+mf}{.24}\PYG{p}{;}

\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}../zeppelin/ownership/Ownable.sol\PYGZdq{}}\PYG{p}{;}
\PYG{k+kr}{import} \PYG{l+s+s2}{\PYGZdq{}./VreoToken.sol\PYGZdq{}}\PYG{p}{;}


\PYG{c+c1}{/// @title VreoTokenBounty}
\PYG{c+c1}{/// @author Autogenerated from a Dia UML diagram}
\PYG{k+kd}{contract} \PYG{n+nx}{VreoTokenBounty} \PYG{k+kr}{is} \PYG{n+nx}{Ownable} \PYG{p}{\PYGZob{}}

    \PYG{n+nx}{VreoToken} \PYG{k+kr}{public} \PYG{n+nx}{token}\PYG{p}{;}

    \PYG{c+c1}{/// @dev Constructor}
    \PYG{c+c1}{/// @param \PYGZus{}token A VreoToken}
    \PYG{k+kd}{constructor}\PYG{p}{(}\PYG{n+nx}{VreoToken} \PYG{n+nx}{\PYGZus{}token}\PYG{p}{)} \PYG{k+kr}{public} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}token}\PYG{p}{)} \PYG{o}{!=} \PYG{k+kt}{address}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}

        \PYG{n+nx}{token} \PYG{o}{=} \PYG{n+nx}{\PYGZus{}token}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}

    \PYG{c+c1}{/// @dev Distribute tokens}
    \PYG{c+c1}{/// @param \PYGZus{}recipients A list where each entry is an Ethereum address}
    \PYG{c+c1}{/// @param \PYGZus{}amounts A list where each entry is a positive number}
    \PYG{k+kd}{function} \PYG{n+nx}{distributeTokens}\PYG{p}{(}\PYG{k+kt}{address}\PYG{p}{[}\PYG{p}{]} \PYG{n+nx}{\PYGZus{}recipients}\PYG{p}{,} \PYG{k+kt}{uint}\PYG{p}{[}\PYG{p}{]} \PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{)} \PYG{k+kr}{public} \PYG{n+nx}{onlyOwner} \PYG{p}{\PYGZob{}}
        \PYG{n+nb}{require}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}recipients}\PYG{p}{.}\PYG{n+nx}{length} \PYG{o}{==} \PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{.}\PYG{n+nx}{length}\PYG{p}{)}\PYG{p}{;}

        \PYG{k}{for} \PYG{p}{(}\PYG{k+kt}{uint} \PYG{n+nx}{i} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{;} \PYG{n+nx}{i} \PYG{o}{\PYGZlt{}} \PYG{n+nx}{\PYGZus{}recipients}\PYG{p}{.}\PYG{n+nx}{length}\PYG{p}{;} \PYG{o}{++}\PYG{n+nx}{i}\PYG{p}{)} \PYG{p}{\PYGZob{}}
            \PYG{n+nx}{token}\PYG{p}{.}\PYG{n+nx}{transfer}\PYG{p}{(}\PYG{n+nx}{\PYGZus{}recipients}\PYG{p}{[}\PYG{n+nx}{i}\PYG{p}{]}\PYG{p}{,} \PYG{n+nx}{\PYGZus{}amounts}\PYG{p}{[}\PYG{n+nx}{i}\PYG{p}{]}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZcb{}}
    \PYG{p}{\PYGZcb{}}

\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\chapter{IconiqInterface}
\label{\detokenize{_contracts/IconiqInterface::doc}}\label{\detokenize{_contracts/IconiqInterface:iconiqinterface}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{k+kr}{pragma} \PYG{n+nx}{solidity} \PYG{l+m+mf}{0.4}\PYG{l+m+mf}{.24}\PYG{p}{;}


\PYG{c+c1}{/// @title IconiqInterface}
\PYG{c+c1}{/// @author Autogenerated from a Dia UML diagram}
\PYG{k+kr}{interface} \PYG{n+nx}{IconiqInterface} \PYG{p}{\PYGZob{}}

    \PYG{c+c1}{/// @dev Is allowed}
    \PYG{c+c1}{/// @param \PYGZus{}account An Ethereum address}
    \PYG{c+c1}{/// @return True or false}
    \PYG{k+kd}{function} \PYG{n+nx}{isAllowed}\PYG{p}{(}\PYG{k+kt}{address} \PYG{n+nx}{\PYGZus{}account}\PYG{p}{)} \PYG{k+kr}{external} \PYG{k+kr}{view} \PYG{k+kr}{returns} \PYG{p}{(}\PYG{k+kt}{bool}\PYG{p}{)}\PYG{p}{;}

\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}



\renewcommand{\indexname}{Index}
\printindex
\end{document}